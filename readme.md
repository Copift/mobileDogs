# Mobile Dogs
## Приложение для бездомных собак  
### app scheme
https://www.figma.com/file/HFADok2OtkYcMbL5KGzcdR/Untitled?type=whiteboard&node-id=0%3A1&t=XV9LhMpKWo6bP0DM-1
### Install 
copy empty database .db to  your server, add config.py 
example 
```
from fastapi.security import OAuth2PasswordBearer
from passlib.context import CryptContext
SECRET_KEY = "09d25e094faa6ca2556c8h166ber9563b93f7099f6f0f4caa6ftyty6h768d3e7 "
ALGORITHM = "HS256"
ACCESS_TOKEN_EXPIRE_MINUTES = 30
from pydantic import PostgresDsn

#DATABASE_URL = "sqlite:///./user_devices.db"
#DATABASE_URL='postgresql+psycopg2://user:passwd)(\
#@ip:port/db_name'

DATABASE_URL = PostgresDsn.build(
    scheme="$$$ ",
    username=" $$$ ",
    password="$$$",
    host="$$$",
    path=f"{'collar' or ''}",
).unicode_string()
pwd_context = CryptContext(schemes=["bcrypt"], deprecated="auto")
oauth2_scheme = OAuth2PasswordBearer(tokenUrl="user/token")
```


```
run $ uvicorn main:app
```

### Пользователь может:
#### с ошейником
- просмотреть список доступных ошейников 
- добаввить себе собаку за которой он хочет следить
- просмотреть все ошейники
- отвязать от себя собаку
- просмотреть кому принадлежит собака
#### с заданиями
 - просмотреть свои задания
- дать задание человеку
- отказаться от задания
- поставить предвыполнение задания и отправить фаил
- если он отправитель задания то потвердить выполенение
##### с поддержкой
- вызвать сотрудника ошейника по номеру mac в случае если он заметил поломку

### Ошейник может:
- отправить свои координаты

### Сотрудник может:
- просмотреть все ошейники
- посмотреть свои уведомления о вызове(проблемах)
- добавить  ошейник в систему

### Скрипт:
- следит за кол-вом выполенных задач ользователем и ограничивает высталение ему задач(например нельзя помыть собаку 3 раза за день) 
- очистка истории перемещения за более чем 1 день 
- создание проблемы об отсутсвии геолокации в течении 30 минут
### валидация бд:
- удаление невыполненых заданий по истечению определнного времени и выставление предупреждения пользователю

 
 
## Схема хранения данных


### Задачи другим пользователям:
- id
- название
- срок
- максимальность в день/неделю(ограничение на спам пользователю)
- кем выставлен
- кому выставлен
- mac  ошейника
- статус - в работе/на проверке/заверешно/истек срок/отменено



### Проблема:
- mac ошейника проблемы
- id пользователя вызвавшего
- обьект ошейник для истории и id хозяина
- описание проблемы

### Ошейник:
- mac
- история перемещения
- координаты
- пользователь(null)
- описание внешнего вида собаки

### Пользователь:
- id
- список ошейников
- список задач
- выставленные задачи
- адрес
- оставленные уведомления о проблемах
- количетсво предупреждений
- список выполененых задач 
- номер телефона

### Сотрудник
- id
- список проблем
- список выставленных ошейников



